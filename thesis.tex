\documentclass[12pt,a4paper,twoside]{book}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{emptypage}
\usepackage{geometry}
%\usepackage[showframe]{geometry}
\usepackage{caption}
\usepackage{listings}
\usepackage{color}

\definecolor{code_comment}{RGB}{65,126,96}
\definecolor{code_keyword}{RGB}{126,8,84}
\definecolor{code_string}{RGB}{45,36,251}
\definecolor{gray}{rgb}{0.5,0.5,0.5}

\lstset{
	frame=tb,
	language=Java,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=left,
	numberstyle=\tiny\color{gray},
	keywordstyle=\color{code_keyword},
	commentstyle=\color{code_comment},
	stringstyle=\color{code_string},
	breaklines=true,
	breakatwhitespace=true
	tabsize=3
}

\DeclareCaptionFormat{listing}{\rule{\dimexpr\textwidth\relax}{0.4pt}\par\addvspace{-6pt} #1#2#3}
\captionsetup[lstlisting]{format=listing,singlelinecheck=false, margin=0pt, font={sf}}

\linespread{1.3}

\begin{document}

	\frontmatter
		\include{cover}
		\include{sommario}
		\include{abstract}

		\tableofcontents
		
	\mainmatter
		\include{chapter1}
		\include{chapter2}
		\include{chapter3}
		\include{chapter4}
		\include{chapter5}
		\include{chapter6}
		\include{chapter7}

	\appendix


\end{document}
